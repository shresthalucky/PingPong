parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"XGi3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.END_WALL=exports.RIGHT_WALL=exports.LEFT_WALL=exports.MAX_MOVE_VELOCITY=exports.SIDE_ANGLE=exports.UP_ANGLE=exports.VELOCITY=exports.SERVE_ANGLE=exports.BOUNDARY_PADDING=exports.OPPONENT_Z_POSITION=exports.PLAYER_Z_POSITION=exports.BAT_INITIAL_Z=exports.BAT_THICKNESS=exports.BAT_WIDTH=exports.BAT_LENGTH=exports.BOUNCE_BACK_VELOCITY=exports.TIME=exports.SLOPE=exports.BALL_INITAL_VEL=exports.BALL_ANGLE=exports.BALL_MIN_RADIUS=exports.BALL_MAX_RADIUS=exports.BALL_START_HEIGHT=exports.NET_OFFSET=exports.NET_Z=exports.NET_HEIGHT=exports.BOARD_END=exports.BOARD_OFFSET=exports.BORDER_WIDTH=exports.BOARD_Z=exports.BOARD_Y=exports.BOARD_RIGHT_X=exports.BOARD_LEFT_X=exports.BOARD_THICKNESS=exports.BOARD_HALF_WIDTH=exports.BOARD_HALF_LENGTH=exports.BOARD_LENGTH=exports.BOARD_WIDTH=exports.TABLE_STAND_PADDING=exports.TABLE_HEIGHT=exports.WHITE=exports.BLACK_C=exports.BLACK_B=exports.BLACK_A=exports.BALL_BORDER=exports.BALL_BACKGROUND=exports.BOARD_BACKGROUND=exports.MAX_CAMERA_Y=exports.HALF_CANVAS_HEIGHT=exports.HALF_CANVAS_WIDTH=exports.CANVAS_HEIGHT=exports.CANVAS_WIDTH=exports.ENV=exports.STATE_LOADED=exports.STATE_INIT=void 0;var r=1;exports.STATE_INIT=r;var A=2;exports.STATE_LOADED=A;var _={gravity:9.82,toRadian:function(r){return r*Math.PI/180}};exports.ENV=_;var t=window.innerWidth;exports.CANVAS_WIDTH=t;var e=window.innerHeight;exports.CANVAS_HEIGHT=e;var o=t/2;exports.HALF_CANVAS_WIDTH=o;var s=e/2;exports.HALF_CANVAS_HEIGHT=s;var p=-1200;exports.MAX_CAMERA_Y=p;var x="#284088";exports.BOARD_BACKGROUND=x;var T="#FFD740";exports.BALL_BACKGROUND=T;var L="#FFC400";exports.BALL_BORDER=L;var E="#000000";exports.BLACK_A=E;var I="#212121";exports.BLACK_B=I;var B="#424242";exports.BLACK_C=B;var D="#FFFFFF";exports.WHITE=D;var N=0;exports.TABLE_HEIGHT=N;var O=40;exports.TABLE_STAND_PADDING=O;var a=800;exports.BOARD_WIDTH=a;var v=6*a/5;exports.BOARD_LENGTH=v;var H=v/2;exports.BOARD_HALF_LENGTH=H;var R=a/2;exports.BOARD_HALF_WIDTH=R;var S=20;exports.BOARD_THICKNESS=S;var C=o-R;exports.BOARD_LEFT_X=C;var G=o+R;exports.BOARD_RIGHT_X=G;var F=-300;exports.BOARD_Y=F;var V=160;exports.BOARD_Z=V;var W=10;exports.BORDER_WIDTH=W;var P=160;exports.BOARD_OFFSET=P;var K=v+V;exports.BOARD_END=K;var M=90;exports.NET_HEIGHT=M;var i=V+H;exports.NET_Z=i;var U=50;exports.NET_OFFSET=U;var Y=100;exports.BALL_START_HEIGHT=Y;var n=14;exports.BALL_MAX_RADIUS=n;var X=6;exports.BALL_MIN_RADIUS=X;var Z=_.toRadian(30);exports.BALL_ANGLE=Z;var d=100;exports.BALL_INITAL_VEL=d;var u=(X-n)/(v-V);exports.SLOPE=u;var w=.25;exports.TIME=w;var c=40;exports.BOUNCE_BACK_VELOCITY=c;var h=207;exports.BAT_LENGTH=h;var f=124;exports.BAT_WIDTH=f;var g=50;exports.BAT_THICKNESS=g;var l=120;exports.BAT_INITIAL_Z=l;var y=V-100;exports.PLAYER_Z_POSITION=y;var b=v+V;exports.OPPONENT_Z_POSITION=b;var j=100;exports.BOUNDARY_PADDING=j;var k=_.toRadian(-50);exports.SERVE_ANGLE=k;var m=85;exports.VELOCITY=m;var q=30;exports.UP_ANGLE=q;var z=0;exports.SIDE_ANGLE=z;var J=1200;exports.MAX_MOVE_VELOCITY=J;var Q=o-2*a;exports.LEFT_WALL=Q;var $=o+2*a;exports.RIGHT_WALL=$;var rr=K+2*a;exports.END_WALL=rr;
},{}],"IOwx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.clamp=c,exports.projection=exports.Position=void 0;var e=n(require("./constants"));function t(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return t=function(){return e},e}function n(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=t();if(n&&n.has(e))return n.get(e);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(r,o,a):r[o]=e[o]}return r.default=e,n&&n.set(e,r),r}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o=function e(t,n,o){var a=this;r(this,e),i(this,"subtract",function(t){var n=a.x-t.x,r=a.y-t.y,i=a.z-t.z;return new e(n,r,i)}),i(this,"get3dDistance",function(e){var t=a.x-e.x,n=a.y-e.y,r=a.z-e.z;return Math.sqrt(t*t+n*n+r*r)}),i(this,"get2dDistance",function(e){var t=a.x-e.x,n=a.y-e.y;return Math.sqrt(t*t+n*n)}),this.x=t,this.y=n,this.z=o};exports.Position=o;var a={camera:{position:new o(0,e.MAX_CAMERA_Y,-300)},viewplane:new o(0,0,500),get2dProjection:function(e){var t=e.subtract(a.camera.position),n=a.viewplane.z/t.z,r=n*t.x+a.viewplane.x,i=n*t.y+a.viewplane.y;return new o(r,i)},get3dPosition:function(t,n){var r=-e.BALL_START_HEIGHT+e.BOARD_Y-a.camera.position.y,i=a.viewplane.z*r/(n-a.viewplane.y),c=(t-a.viewplane.x)*i/a.viewplane.z,s=a.camera.position.x+c,u=a.camera.position.y+r,p=a.camera.position.z+i;return new o(s,u,p)}};function c(e,t,n){return Math.min(Math.max(n,e),t)}exports.projection=a;
},{"./constants":"XGi3"}],"Kgao":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Wall=exports.Floor=void 0;var t=r(require("./constants")),e=require("./utils");function o(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return o=function(){return t},t}function r(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=o();if(e&&e.has(t))return e.get(t);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var a=n?Object.getOwnPropertyDescriptor(t,i):null;a&&(a.get||a.set)?Object.defineProperty(r,i,a):r[i]=t[i]}return r.default=t,e&&e.set(t,r),r}function n(t,e){var o;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(o=i(t))||e&&t&&"number"==typeof t.length){o&&(t=o);var r=0,n=function(){};return{s:n,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,l=!0,c=!1;return{s:function(){o=t[Symbol.iterator]()},n:function(){var t=o.next();return l=t.done,t},e:function(t){c=!0,a=t},f:function(){try{l||null==o.return||o.return()}finally{if(c)throw a}}}}function i(t,e){if(t){if("string"==typeof t)return a(t,e);var o=Object.prototype.toString.call(t).slice(8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?Array.from(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?a(t,e):void 0}}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var o=0,r=new Array(e);o<e;o++)r[o]=t[o];return r}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}var f=function o(){var r=this;l(this,o),c(this,"draw",function(t){t.beginPath(),t.moveTo(r.surface2d.topLeft.x,r.surface2d.topLeft.y),t.lineTo(r.surface2d.topRight.x,r.surface2d.topRight.y),t.lineTo(r.surface2d.bottomRight.x,r.surface2d.bottomRight.y),t.lineTo(r.surface2d.bottomLeft.x,r.surface2d.bottomLeft.y),t.lineTo(r.surface2d.topLeft.x,r.surface2d.topLeft.y),t.fillStyle="#90A4AE",t.fill(),t.closePath()});var n=t.TABLE_HEIGHT;this.surface3d={topLeft:new e.Position(t.LEFT_WALL,n,t.END_WALL),topRight:new e.Position(t.RIGHT_WALL,n,t.END_WALL),bottomRight:new e.Position(t.RIGHT_WALL,n,e.projection.camera.position.z+1),bottomLeft:new e.Position(t.LEFT_WALL,n,e.projection.camera.position.z+1)},this.surface2d={topLeft:e.projection.get2dProjection(this.surface3d.topLeft),topRight:e.projection.get2dProjection(this.surface3d.topRight),bottomRight:e.projection.get2dProjection(this.surface3d.bottomRight),bottomLeft:e.projection.get2dProjection(this.surface3d.bottomLeft)}};exports.Floor=f;var s=function o(){var r=this;l(this,o),c(this,"drawLeftWall",function(t){var e=r.surface2d.leftWall[0];t.beginPath(),t.moveTo(e.x,e.y);var o,i=n(r.surface2d.leftWall);try{for(i.s();!(o=i.n()).done;){var a=o.value;t.lineTo(a.x,a.y)}}catch(l){i.e(l)}finally{i.f()}t.lineTo(e.x,e.y),t.fillStyle="#BDBDBD",t.fill(),t.closePath()}),c(this,"drawBackWall",function(t){var e=r.surface2d.backWall[0];t.beginPath(),t.moveTo(e.x,e.y);var o,i=n(r.surface2d.backWall);try{for(i.s();!(o=i.n()).done;){var a=o.value;t.lineTo(a.x,a.y)}}catch(l){i.e(l)}finally{i.f()}t.lineTo(e.x,e.y),t.fillStyle="#BDBDBD",t.fill(),t.closePath()}),c(this,"drawRightWall",function(t){var e=r.surface2d.rightWall[0];t.beginPath(),t.moveTo(e.x,e.y);var o,i=n(r.surface2d.rightWall);try{for(i.s();!(o=i.n()).done;){var a=o.value;t.lineTo(a.x,a.y)}}catch(l){i.e(l)}finally{i.f()}t.lineTo(e.x,e.y),t.fillStyle="#BDBDBD",t.fill(),t.closePath()}),c(this,"draw",function(t){r.drawLeftWall(t),r.drawBackWall(t),r.drawRightWall(t)});var i=t.TABLE_HEIGHT,a=e.projection.camera.position.y;this.surface3d={leftWall:[new e.Position(t.LEFT_WALL,i,e.projection.camera.position.z+1),new e.Position(t.LEFT_WALL,i,t.END_WALL),new e.Position(t.LEFT_WALL,a,t.END_WALL),new e.Position(t.LEFT_WALL,a,e.projection.camera.position.z+1)],backWall:[new e.Position(t.LEFT_WALL,i,t.END_WALL),new e.Position(t.LEFT_WALL,a,t.END_WALL),new e.Position(t.RIGHT_WALL,a,t.END_WALL),new e.Position(t.RIGHT_WALL,i,t.END_WALL)],rightWall:[new e.Position(t.RIGHT_WALL,i,e.projection.camera.position.z+1),new e.Position(t.RIGHT_WALL,i,t.END_WALL),new e.Position(t.RIGHT_WALL,a,t.END_WALL),new e.Position(t.RIGHT_WALL,a,e.projection.camera.position.z+1)]},this.surface2d={leftWall:this.surface3d.leftWall.map(e.projection.get2dProjection),backWall:this.surface3d.backWall.map(e.projection.get2dProjection),rightWall:this.surface3d.rightWall.map(e.projection.get2dProjection)}};exports.Wall=s;
},{"./constants":"XGi3","./utils":"IOwx"}],"COnm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=n(require("../constants")),e=require("../utils");function i(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return i=function(){return t},t}function n(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=i();if(e&&e.has(t))return e.get(t);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){var o=r?Object.getOwnPropertyDescriptor(t,s):null;o&&(o.get||o.set)?Object.defineProperty(n,s,o):n[s]=t[s]}return n.default=t,e&&e.set(t,n),n}function r(t,e){var i;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(i=s(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var n=0,r=function(){};return{s:r,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,h=!1;return{s:function(){i=t[Symbol.iterator]()},n:function(){var t=i.next();return a=t.done,t},e:function(t){h=!0,o=t},f:function(){try{a||null==i.return||i.return()}finally{if(h)throw o}}}}function s(t,e){if(t){if("string"==typeof t)return o(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?o(t,e):void 0}}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function h(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var l=function i(){var n=this;a(this,i),h(this,"drawOuterSurface",function(e){var i=n.surface2d.outer[0];e.beginPath(),e.moveTo(i.x,i.y);var s,o=r(n.surface2d.outer);try{for(o.s();!(s=o.n()).done;){var a=s.value;e.lineTo(a.x,a.y)}}catch(h){o.e(h)}finally{o.f()}e.lineTo(i.x,i.y),e.fillStyle=t.WHITE,e.fill(),e.strokeStyle=t.BLACK_B,e.stroke(),e.closePath()}),h(this,"drawInnerSurface",function(e){var i=n.surface2d.inner[0];e.beginPath(),e.moveTo(i.x,i.y);var s,o=r(n.surface2d.inner);try{for(o.s();!(s=o.n()).done;){var a=s.value;e.lineTo(a.x,a.y)}}catch(h){o.e(h)}finally{o.f()}e.lineTo(i.x,i.y),e.fillStyle=t.BOARD_BACKGROUND,e.fill(),e.closePath()}),h(this,"drawThickness",function(e){var i=n.surface2d.thickness[0];e.beginPath(),e.moveTo(i.x,i.y);var s,o=r(n.surface2d.thickness);try{for(o.s();!(s=o.n()).done;){var a=s.value;e.lineTo(a.x,a.y)}}catch(h){o.e(h)}finally{o.f()}e.lineTo(i.x,i.y),e.fillStyle=t.BLACK_C,e.fill(),e.strokeStyle=t.BLACK_B,e.stroke(),e.closePath()}),h(this,"drawMidLine",function(e){var i=n.surface2d.midLine[0];e.beginPath(),e.moveTo(i.x,i.y);var s,o=r(n.surface2d.midLine);try{for(o.s();!(s=o.n()).done;){var a=s.value;e.lineTo(a.x,a.y)}}catch(h){o.e(h)}finally{o.f()}e.lineTo(i.x,i.y),e.fillStyle=t.WHITE,e.fill(),e.closePath()}),h(this,"drawTableStand",function(e){var i=n.surface2d.tableLeftStand[0];e.beginPath(),e.moveTo(i.x,i.y);var s,o=r(n.surface2d.tableLeftStand);try{for(o.s();!(s=o.n()).done;){var a=s.value;e.lineTo(a.x,a.y)}}catch(_){o.e(_)}finally{o.f()}e.lineTo(i.x,i.y),e.fillStyle=t.BLACK_B,e.fill(),i=n.surface2d.tableLeftThickness[0],e.beginPath(),e.moveTo(i.x,i.y);var h,l=r(n.surface2d.tableLeftThickness);try{for(l.s();!(h=l.n()).done;){var c=h.value;e.lineTo(c.x,c.y)}}catch(_){l.e(_)}finally{l.f()}e.lineTo(i.x,i.y),e.fillStyle=t.BLACK_A,e.fill(),i=n.surface2d.tableRightStand[0],e.beginPath(),e.moveTo(i.x,i.y);var A,f=r(n.surface2d.tableRightStand);try{for(f.s();!(A=f.n()).done;){var T=A.value;e.lineTo(T.x,T.y)}}catch(_){f.e(_)}finally{f.f()}e.lineTo(i.x,i.y),e.fillStyle=t.BLACK_B,e.fill(),i=n.surface2d.tableRightThickness[0],e.beginPath(),e.moveTo(i.x,i.y);var D,d=r(n.surface2d.tableRightThickness);try{for(d.s();!(D=d.n()).done;){var u=D.value;e.lineTo(u.x,u.y)}}catch(_){d.e(_)}finally{d.f()}e.lineTo(i.x,i.y),e.fillStyle=t.BLACK_A,e.fill()}),h(this,"draw",function(t){n.drawTableStand(t),n.drawOuterSurface(t),n.drawInnerSurface(t),n.drawThickness(t),n.drawMidLine(t)}),this.width=t.BOARD_WIDTH,this.length=t.BOARD_LENGTH,this.thickness=t.BOARD_THICKNESS+t.BOARD_Y,this.z=t.BOARD_Z,this.borderWidth=t.BORDER_WIDTH,this.y=t.BOARD_Y;var s=t.HALF_CANVAS_WIDTH-t.BOARD_HALF_WIDTH,o=t.HALF_CANVAS_WIDTH+t.BOARD_HALF_WIDTH,l=s+t.BOARD_HALF_WIDTH-this.borderWidth/2,c=o-t.BOARD_HALF_WIDTH+this.borderWidth/2;this.surface3d={outer:[new e.Position(s,this.y,this.z),new e.Position(o,this.y,this.z),new e.Position(o,this.y,this.length+this.z),new e.Position(s,this.y,this.length+this.z)],thickness:[new e.Position(s,this.y,this.z),new e.Position(o,this.y,this.z),new e.Position(o,this.thickness,this.z),new e.Position(s,this.thickness,this.z)],inner:[new e.Position(s+2*this.borderWidth,this.y,this.z+this.borderWidth),new e.Position(o-2*this.borderWidth,this.y,this.z+this.borderWidth),new e.Position(o-this.borderWidth,this.y,this.length+this.z-this.borderWidth),new e.Position(s+this.borderWidth,this.y,this.length+this.z-this.borderWidth)],midLine:[new e.Position(l,this.y,this.z+1),new e.Position(c,this.y,this.z+1),new e.Position(c,this.y,this.length+this.z-1),new e.Position(l,this.y,this.length+this.z-1)],tableLeftStand:[new e.Position(s+t.TABLE_STAND_PADDING,this.thickness,this.z+t.TABLE_STAND_PADDING),new e.Position(s+2*t.TABLE_STAND_PADDING,this.thickness,this.z+t.TABLE_STAND_PADDING),new e.Position(s+2*t.TABLE_STAND_PADDING,t.TABLE_HEIGHT,this.z+t.TABLE_STAND_PADDING),new e.Position(s+t.TABLE_STAND_PADDING,t.TABLE_HEIGHT,this.z+t.TABLE_STAND_PADDING)],tableLeftThickness:[new e.Position(s+2*t.TABLE_STAND_PADDING,this.thickness,this.z+t.TABLE_STAND_PADDING),new e.Position(s+2*t.TABLE_STAND_PADDING,this.thickness,this.z+t.TABLE_STAND_PADDING+t.BOARD_THICKNESS),new e.Position(s+2*t.TABLE_STAND_PADDING,t.TABLE_HEIGHT,this.z+t.TABLE_STAND_PADDING+t.BOARD_THICKNESS),new e.Position(s+2*t.TABLE_STAND_PADDING,t.TABLE_HEIGHT,this.z+t.TABLE_STAND_PADDING)],tableRightStand:[new e.Position(o-t.TABLE_STAND_PADDING,this.thickness,this.z+t.TABLE_STAND_PADDING),new e.Position(o-2*t.TABLE_STAND_PADDING,this.thickness,this.z+t.TABLE_STAND_PADDING),new e.Position(o-2*t.TABLE_STAND_PADDING,t.TABLE_HEIGHT,this.z+t.TABLE_STAND_PADDING),new e.Position(o-t.TABLE_STAND_PADDING,t.TABLE_HEIGHT,this.z+t.TABLE_STAND_PADDING)],tableRightThickness:[new e.Position(o-2*t.TABLE_STAND_PADDING,this.thickness,this.z+t.TABLE_STAND_PADDING),new e.Position(o-2*t.TABLE_STAND_PADDING,this.thickness,this.z+t.TABLE_STAND_PADDING+t.BOARD_THICKNESS),new e.Position(o-2*t.TABLE_STAND_PADDING,t.TABLE_HEIGHT,this.z+t.TABLE_STAND_PADDING+t.BOARD_THICKNESS),new e.Position(o-2*t.TABLE_STAND_PADDING,t.TABLE_HEIGHT,this.z+t.TABLE_STAND_PADDING)]},this.surface2d={outer:this.surface3d.outer.map(e.projection.get2dProjection),inner:this.surface3d.inner.map(e.projection.get2dProjection),thickness:this.surface3d.thickness.map(e.projection.get2dProjection),midLine:this.surface3d.midLine.map(e.projection.get2dProjection),tableLeftStand:this.surface3d.tableLeftStand.map(e.projection.get2dProjection),tableLeftThickness:this.surface3d.tableLeftThickness.map(e.projection.get2dProjection),tableRightStand:this.surface3d.tableRightStand.map(e.projection.get2dProjection),tableRightThickness:this.surface3d.tableRightThickness.map(e.projection.get2dProjection)}},c=l;exports.default=c;
},{"../constants":"XGi3","../utils":"IOwx"}],"gsPW":[function(require,module,exports) {
module.exports="sprite.f295abf3.png";
},{}],"WxUJ":[function(require,module,exports) {
module.exports="referee.9b0828ac.mp3";
},{}],"cDiv":[function(require,module,exports) {
module.exports="bounce1.35931afd.mp3";
},{}],"pdNp":[function(require,module,exports) {
module.exports="bounce2.f6957d47.mp3";
},{}],"ad4q":[function(require,module,exports) {
module.exports="hit.6bea7334.mp3";
},{}],"oTJH":[function(require,module,exports) {
module.exports="clap1.2f23fdbf.mp3";
},{}],"JPoE":[function(require,module,exports) {
module.exports="clap2.82d35a3e.mp3";
},{}],"dVs8":[function(require,module,exports) {
"use strict";var e,t,r,s,o,n,a;function p(p){exports.sprite=e=new Image,e.src=require("../assets/sprite.png"),e.onload=p,exports.referee=t=document.createElement("audio"),document.body.appendChild(t),t.addEventListener("canplaythrough",p),t.setAttribute("src",require("../assets/sounds/referee.mp3")),exports.bounceIn=r=document.createElement("audio"),document.body.appendChild(r),r.addEventListener("canplaythrough",p),r.setAttribute("src",require("../assets/sounds/bounce1.mp3")),exports.bounceOut=s=document.createElement("audio"),document.body.appendChild(s),s.addEventListener("canplaythrough",p),s.setAttribute("src",require("../assets/sounds/bounce2.mp3")),exports.batHit=o=document.createElement("audio"),document.body.appendChild(o),o.addEventListener("canplaythrough",p),o.setAttribute("src",require("../assets/sounds/hit.mp3")),exports.clapHigh=n=document.createElement("audio"),document.body.appendChild(n),n.addEventListener("canplaythrough",p),n.setAttribute("src",require("../assets/sounds/clap1.mp3")),exports.clapLow=a=document.createElement("audio"),document.body.appendChild(a),a.addEventListener("canplaythrough",p),a.setAttribute("src",require("../assets/sounds/clap2.mp3"))}function u(e){t.removeEventListener("canplaythrough",e),r.removeEventListener("canplaythrough",e),s.removeEventListener("canplaythrough",e),o.removeEventListener("canplaythrough",e),n.removeEventListener("canplaythrough",e),a.removeEventListener("canplaythrough",e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.initAssets=p,exports.removeAssetsEvent=u,exports.clapLow=exports.clapHigh=exports.batHit=exports.bounceOut=exports.bounceIn=exports.referee=exports.sprite=void 0,exports.sprite=e,exports.referee=t,exports.bounceIn=r,exports.bounceOut=s,exports.batHit=o,exports.clapHigh=n,exports.clapLow=a;
},{"../assets/sprite.png":"gsPW","../assets/sounds/referee.mp3":"WxUJ","../assets/sounds/bounce1.mp3":"cDiv","../assets/sounds/bounce2.mp3":"pdNp","../assets/sounds/hit.mp3":"ad4q","../assets/sounds/clap1.mp3":"oTJH","../assets/sounds/clap2.mp3":"JPoE"}],"eYIz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=s(require("../constants")),e=require("../utils"),r=require("../assets");function i(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return i=function(){return t},t}function s(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=i();if(e&&e.has(t))return e.get(t);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var n=s?Object.getOwnPropertyDescriptor(t,o):null;n&&(n.get||n.set)?Object.defineProperty(r,o,n):r[o]=t[o]}return r.default=t,e&&e.set(t,r),r}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var a=function i(){var s=this;o(this,i),n(this,"draw",function(t){var e=s.surface2d.topLeft.get2dDistance(s.surface2d.bottomLeft),o=s.surface2d.topRight.get2dDistance(s.surface2d.topLeft);s.spriteWidth=s.surface2d.netImageLeft.get2dDistance(s.surface2d.netImageRight);for(var n=Math.floor(o/s.spriteWidth)+2,a=0;a<=n;a++)0===a?t.drawImage(r.sprite,i.sprite.barLeft.sx,i.sprite.barLeft.sy,i.sprite.barLeft.sw,i.sprite.barLeft.sh,s.surface2d.topLeft.x-s.spriteWidth,s.surface2d.topLeft.y,s.spriteWidth,e):a===n?t.drawImage(r.sprite,i.sprite.barRight.sx,i.sprite.barRight.sy,i.sprite.barRight.sw,i.sprite.barRight.sh,s.surface2d.topLeft.x+s.spriteWidth*(a-1),s.surface2d.topLeft.y,s.spriteWidth,e):t.drawImage(r.sprite,i.sprite.strip.sx,i.sprite.strip.sy,i.sprite.strip.sw,i.sprite.strip.sh,s.surface2d.topLeft.x+s.spriteWidth*(a-1),s.surface2d.topLeft.y,s.spriteWidth,e)}),n(this,"checkCollision",function(e){var r=e.current3dPos.z-t.BALL_MAX_RADIUS,i=e.current3dPos.z+t.BALL_MAX_RADIUS,o=(e.current3dPos.y,t.BALL_MAX_RADIUS,e.current3dPos.y-t.BALL_MAX_RADIUS),n=e.current3dPos.x+t.BALL_MAX_RADIUS;return(i>=s.z-t.BALL_MAX_RADIUS&&i<=s.z+t.BALL_MAX_RADIUS||r<=s.z-t.BALL_MAX_RADIUS&&r>=s.z+t.BALL_MAX_RADIUS)&&o<=s.height-t.BOARD_Y&&n<=s.surface3d.bottomRight.x+s.spriteWidth&&n>=s.surface3d.topLeft.x-s.spriteWidth}),this.width=t.BOARD_WIDTH,this.height=t.NET_HEIGHT,this.z=t.NET_Z,this.y=t.BOARD_Y;var a=t.HALF_CANVAS_WIDTH-t.BOARD_HALF_WIDTH,f=t.HALF_CANVAS_WIDTH+t.BOARD_HALF_WIDTH;this.surface3d={topLeft:new e.Position(a,this.y-this.height,this.z),topRight:new e.Position(f,this.y-this.height,this.z),bottomRight:new e.Position(f,this.y,this.z),bottomLeft:new e.Position(a,this.y,this.z),netImageLeft:new e.Position(a,this.y,this.z),netImageRight:new e.Position(a+i.sprite.strip.sw,this.y,this.z)},this.surface2d={topLeft:e.projection.get2dProjection(this.surface3d.topLeft),topRight:e.projection.get2dProjection(this.surface3d.topRight),bottomRight:e.projection.get2dProjection(this.surface3d.bottomRight),bottomLeft:e.projection.get2dProjection(this.surface3d.bottomLeft),netImageLeft:e.projection.get2dProjection(this.surface3d.netImageLeft),netImageRight:e.projection.get2dProjection(this.surface3d.netImageRight)},this.spriteWidth};a.sprite={strip:{sx:127,sy:0,sw:37,sh:90},barLeft:{sx:165,sy:0,sw:37,sh:90},barRight:{sx:224,sy:0,sw:37,sh:90}};var f=a;exports.default=f;
},{"../constants":"XGi3","../utils":"IOwx","../assets":"dVs8"}],"Xn8G":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.startGame=S,exports.resetGame=B,exports.logBounce=j,exports.initMouseEvent=k,exports.Game=void 0;var e=a(require("./constants")),t=require("./utils"),r=require("./assets");function n(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return n=function(){return e},e}function a(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=n();if(t&&t.has(e))return t.get(e);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=a?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=e[i]}return r.default=e,t&&t.set(e,r),r}function i(e){return u(e)||c(e)||s(e)||o()}function o(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(e,t){if(e){if("string"==typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(e,t):void 0}}function c(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function u(e){if(Array.isArray(e))return l(e)}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var v,f,p,d,b,y,A,m,_,O,P,D,w,E={state:{begin:!0,inPlay:!1,isOver:!1,ballStart:!0,served:!1,serveSuccess:!1,pause:!1,ballIn:!0},batDirection:!1};function B(){exports.Game=E={state:{begin:!0,inPlay:!1,isOver:!1,ballStart:!0,served:!1,serveSuccess:!1,pause:!1,ballIn:!0},batDirection:!1}}function S(e,t,r,n){v=e,f=t.floor,p=t.walls,d=t.table,b=t.net,y=t.ball,A=t.player,m=t.opponent,_=t.scoreboard,D=r,w=n,z(),L()}function x(t){Math.abs(y.current3dPos.y)<-e.BOARD_Y?(y.draw(t),d.draw(t),b.draw(t)):(d.draw(t),b.draw(t),y.draw(t))}function L(){v.clearRect(-500,-500,e.CANVAS_WIDTH+500,e.CANVAS_HEIGHT+500),f.draw(v),p.draw(v),_.draw(v),y.current3dPos.z>m.position.z?(x(v),m.draw(v)):(m.draw(v),x(v)),E.state.begin&&!E.state.isOver?(A.draw(v),R(),E.state.served?E.state.inPlay&&I():h(),P=performance.now(),O=requestAnimationFrame(L)):cancelAnimationFrame(O)}function g(){A.resetBounce(),m.resetBounce()}function h(){if(_.state.server===A){var n=(0,t.clamp)(e.BOARD_LEFT_X+e.BALL_MAX_RADIUS,e.BOARD_RIGHT_X-e.BALL_MAX_RADIUS,A.position.x);y.setPosition(new t.Position(n,A.position.y,e.BOARD_Z)),E.batDirection||A.movementDirection(y),A.batActive&&E.batDirection&&y.checkCollision(A)&&(g(),r.batHit.play(),A.serve(y,P),G(),E.state.served=!0,A.batActive=!1)}else{g();var a=m.setPosition();y.setPosition(a),r.batHit.play(),m.serve(y,e.VELOCITY),E.state.served=!0,A.batActive=!0}}function I(){var t;return A.batActive&&y.checkCollision(A)?(g(),r.batHit.play(),E.state.serveSuccess=!0,A.batActive=!1,(t=y).hit.apply(t,[A].concat(i(A.getParameters(P)))),_.state.driver=A,A.foul()&&(E.state.inPlay=!1),void G()):m.batActive&&y.checkCollision(m)?(g(),r.batHit.play(),E.state.serveSuccess=!0,y.hit(m,e.VELOCITY,e.SIDE_ANGLE,e.UP_ANGLE),A.batActive=!0,_.state.driver=m,void(m.foul()&&(E.state.inPlay=!1))):void 0}function R(){1===y.bounceCount&&(E.state.inPlay=!0),b.checkCollision(y)&&(y.bounceBack(b,_.state.driver),E.state.inPlay=!1,_.state.driver.batActive=!1),E.state.inPlay&&y.ballOut()&&(T(),E.state.served=!1,E.state.inPlay=!1,E.batDirection=!1,E.state.serveSuccess=!1,A.batActive=!0,m.batActive=!0)}function T(){_.updateScore(A,m),_.checkWin(H),_.server(A,m)}function H(){E.state.inPlay=!1,_.resetState(),_.allOver()&&C()}function G(){var r=y.current3dPos,n=y.velocity.z*e.TIME/(10*y.velocity.x),a=new t.Position(r.x+(e.BOARD_END-r.z)/n,m.position.y,e.BOARD_END+10),i=e.BOARD_RIGHT_X,o=e.BOARD_LEFT_X;if(a.x<o){a.x=o;var s=n*(o-r.x)+r.z;a.z=s>e.NET_Z+e.BOARD_HALF_LENGTH/2?s:a.z}else if(a.x>i){a.x=i;var c=n*(i-r.x)+r.z;a.z=c>e.NET_Z+e.BOARD_HALF_LENGTH/2?c:a.z}m.animate(a)}function j(){A.logBounce(y),m.logBounce(y)}function k(){document.addEventListener("mousemove",function(e){A&&A.handleBatMovement(e)})}function M(e){E.state.pause=!E.state.pause,"Escape"===e.key&&(E.state.pause?(cancelAnimationFrame(O),D()):(w(),O=requestAnimationFrame(L)))}function z(){document.addEventListener("keyup",M)}function C(){document.removeEventListener("keyup",M)}exports.Game=E;
},{"./constants":"XGi3","./utils":"IOwx","./assets":"dVs8"}],"TmFj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=n(require("../constants")),e=require("../utils"),o=require("../assets");function i(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return i=function(){return t},t}function n(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=i();if(e&&e.has(t))return e.get(t);var o={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var s=n?Object.getOwnPropertyDescriptor(t,r):null;s&&(s.get||s.set)?Object.defineProperty(o,r,s):o[r]=t[r]}return o.default=t,e&&e.set(t,o),o}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}var a=function i(n){var a=this;r(this,i),s(this,"loadSurface",function(){a.surface3d={topLeft:new e.Position(a.position.x-a.halfSize.width,a.position.y-a.halfSize.long,a.position.z),topRight:new e.Position(a.position.x+a.halfSize.width,a.position.y-a.halfSize.long,a.position.z),bottomRight:new e.Position(a.position.x+a.halfSize.width,a.position.y+a.halfSize.long,a.position.z),bottomLeft:new e.Position(a.position.x-a.halfSize.width,a.position.y+a.halfSize.long,a.position.z)},a.surface2d={topLeft:e.projection.get2dProjection(a.surface3d.topLeft),topRight:e.projection.get2dProjection(a.surface3d.topRight),bottomRight:e.projection.get2dProjection(a.surface3d.bottomRight),bottomLeft:e.projection.get2dProjection(a.surface3d.bottomLeft)}}),s(this,"draw",function(t){a.loadSurface();var e=a.surface2d.topRight.get2dDistance(a.surface2d.topLeft),n=a.surface2d.topLeft.get2dDistance(a.surface2d.bottomLeft);t.save(),t.beginPath(),t.translate(a.surface2d.topLeft.x+e/2,a.surface2d.topLeft.y+n/2),t.rotate(a.getRotationAngle()),t.drawImage(o.sprite,i.sprite.bat.sx,i.sprite.bat.sy,i.sprite.bat.sw,i.sprite.bat.sh,-e/2,-n/2,e,n),t.closePath(),t.restore()}),s(this,"resetBounce",function(){a.bounce=0}),s(this,"getRotationAngle",function(){var e=(t.HALF_CANVAS_WIDTH-a.position.x)/(t.BOARD_HALF_WIDTH+t.BOUNDARY_PADDING);return Math.acos(e)-t.ENV.toRadian(90)}),s(this,"logBounce",function(t){var e=t.current3dPos;e.x>=a.selfHalf.left&&e.x<=a.selfHalf.right&&e.z>=a.selfHalf.bottom&&e.z<=a.selfHalf.top&&a.bounce++}),s(this,"foul",function(){return 1!=a.bounce&&a.position.z<=a.selfHalf.top}),this.position=new e.Position(n.x,n.y,n.z),this.size={long:t.BAT_LENGTH,width:t.BAT_WIDTH},this.halfSize={long:this.size.long/2,width:this.size.width/2},this.surface3d,this.surface2d,this.bounce=0,this.batActive=!0,this.selfHalf};a.sprite={bat:{sx:0,sy:0,sw:124,sh:207}};var f=a;exports.default=f;
},{"../constants":"XGi3","../utils":"IOwx","../assets":"dVs8"}],"b8z5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=u(require("../constants")),e=o(require("../components/player")),r=require("../utils"),n=require("../game");function o(t){return t&&t.__esModule?t:{default:t}}function i(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return i=function(){return t},t}function u(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=i();if(e&&e.has(t))return e.get(t);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var u=n?Object.getOwnPropertyDescriptor(t,o):null;u&&(u.get||u.set)?Object.defineProperty(r,o,u):r[o]=t[o]}return r.default=t,e&&e.set(t,r),r}function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function f(t){return l(t)||s(t)||p(t)||a()}function a(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function p(t,e){if(t){if("string"==typeof t)return y(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?y(t,e):void 0}}function s(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function l(t){if(Array.isArray(t))return y(t)}function y(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function b(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&O(t,e)}function O(t,e){return(O=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function m(t){var e=A();return function(){var r,n=h(t);if(e){var o=h(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return v(this,r)}}function v(t,e){return!e||"object"!==c(e)&&"function"!=typeof e?d(t):e}function d(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function A(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function D(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var P=function(o){_(u,e.default);var i=m(u);function u(e){var o;return b(this,u),D(d(o=i.call(this,e)),"getParameters",function(e){var n=(performance.now()-e)/1e3,i=o.position.x-o.prevPositionX,u=o.position.z-o.prevPositionZ,c=0!==i?Math.atan(u/i):0,f=((0,r.clamp)(0,t.MAX_MOVE_VELOCITY,u/n)+2400)/40;return[f,c,120-f]}),D(d(o),"serve",function(t,e){t.serve.apply(t,f(o.getParameters(e)))}),D(d(o),"fitToCourt",function(){var e=t.BOARD_LEFT_X-t.BOUNDARY_PADDING+t.BALL_MAX_RADIUS,n=t.BOARD_RIGHT_X+t.BOUNDARY_PADDING-t.BALL_MAX_RADIUS,i=t.BOARD_Z+t.BOARD_HALF_LENGTH;o.position.x=(0,r.clamp)(e,n,o.position.x),o.position.z=(0,r.clamp)(0,i,o.position.z)}),D(d(o),"handleBatMovement",function(t){t.preventDefault(),t.stopPropagation(),o.prevPositionX=o.position.x,o.prevPositionZ=o.position.z,o.position=r.projection.get3dPosition(t.clientX,t.clientY),o.fitToCourt()}),D(d(o),"movementDirection",function(e){o.position.z-(e.current3dPos.z-t.BAT_THICKNESS)<0&&(n.Game.batDirection=!0)}),o.selfHalf={top:t.BOARD_Z+t.BOARD_HALF_LENGTH,bottom:t.BOARD_Z,left:t.BOARD_LEFT_X,right:t.BOARD_RIGHT_X},o}return u}(),R=P;exports.default=R;
},{"../constants":"XGi3","../components/player":"TmFj","../utils":"IOwx","../game":"Xn8G"}],"BTgw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=i(require("../constants")),e=r(require("../components/player")),n=require("../utils");function r(t){return t&&t.__esModule?t:{default:t}}function o(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return o=function(){return t},t}function i(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=o();if(e&&e.has(t))return e.get(t);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var u=r?Object.getOwnPropertyDescriptor(t,i):null;u&&(u.get||u.set)?Object.defineProperty(n,i,u):n[i]=t[i]}return n.default=t,e&&e.set(t,n),n}function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function f(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(t){var e=y();return function(){var n,r=_(t);if(e){var o=_(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return p(this,n)}}function p(t,e){return!e||"object"!==u(e)&&"function"!=typeof e?l(t):e}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function y(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function _(t){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function b(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var O=function(r){c(i,e.default);var o=s(i);function i(e){var r;return f(this,i),b(l(r=o.call(this,e)),"setPosition",function(e){if(!e){var o=t.BOARD_LEFT_X+t.BALL_MAX_RADIUS,i=t.BOARD_RIGHT_X-t.BALL_MAX_RADIUS,u=Math.random()*(i-o)+o,f=t.BOARD_Y-t.BALL_START_HEIGHT;return r.position=new n.Position(u,f,t.BOARD_END),r.position}return r.position=new n.Position(e.x,e.y,e.z),r.position}),b(l(r),"serve",function(t,e){t.setPosition(r.position),t.serve(-e)}),b(l(r),"animate",function(t){var e=r.position.x,n=r.position.z,o=t.x-r.position.x,i=t.z-r.position.z,u={total:1500,elapsed:0};requestAnimationFrame(function t(f){u.start?u.elapsed=f-u.start:u.start=f;var c,a,s,p=(a=(c=u).elapsed,s=c.total,Math.min(a/s,1)),l=function(t){return Math.pow(--t,5)+1}(p);r.position.x=e+o*l,r.position.z=n+i*l,p<1&&requestAnimationFrame(t)})}),r.selfHalf={top:t.BOARD_END,bottom:t.BOARD_Z+t.BOARD_HALF_LENGTH,left:t.BOARD_LEFT_X,right:t.BOARD_RIGHT_X},r}return i}(),d=O;exports.default=d;
},{"../constants":"XGi3","../components/player":"TmFj","../utils":"IOwx"}],"A97j":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=u(require("../constants")),e=require("../utils"),i=require("../game/"),n=require("../assets"),o=s(require("../players/user")),r=s(require("../players/opponent"));function s(t){return t&&t.__esModule?t:{default:t}}function a(){if("function"!=typeof WeakMap)return null;var t=new WeakMap;return a=function(){return t},t}function u(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=a();if(e&&e.has(t))return e.get(t);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var r=n?Object.getOwnPropertyDescriptor(t,o):null;r&&(r.get||r.set)?Object.defineProperty(i,o,r):i[o]=t[o]}return i.default=t,e&&e.set(t,i),i}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var d=function s(a){var u=this;c(this,s),l(this,"getRadius",function(){return Math.max(t.SLOPE*(u.current3dPos.z-t.BOARD_Z)+t.BALL_MAX_RADIUS,4)}),l(this,"draw",function(n){i.Game.state.served&&u.bounce();var o=u.current3dPos.y>0?-u.current3dPos.y:u.current3dPos.y,r=e.projection.get2dProjection(new e.Position(u.current3dPos.x,o,u.current3dPos.z));u.current3dPos.z>0&&(u.radius=u.getRadius()),u.drawShadow(n),n.beginPath(),n.arc(r.x,r.y,u.radius,0,360),n.fillStyle=t.BALL_BACKGROUND,n.fill(),n.strokeStyle=t.BALL_BORDER,n.stroke(),n.closePath()}),l(this,"getBounceAngle",function(){var t=u.lastPosition.get3dDistance(u.current3dPos),i=u.current3dPos.get3dDistance(new e.Position(u.lastPosition.x,0,u.lastPosition.z));return Math.atan(t/i)}),l(this,"bounce",function(){if(u.rebound)(0,i.logBounce)(),i.Game.state.ballIn?n.bounceIn.play():n.bounceOut.play(),u.initialVel=-u.velocity.y,u.initial3dPos.z=u.current3dPos.z,u.current3dPos.y=-u.bounceLevel,u.initial3dPos.y=-u.bounceLevel,u.rebound=!1,u.time=0,u.angle=u.getBounceAngle(),u.bounceCount++;else{u.lastPosition=new e.Position(u.current3dPos.x,u.current3dPos.y,u.current3dPos.z),u.current3dPos.z=u.initial3dPos.z+u.velocity.z*u.time,0!==u.velocity.x&&(u.current3dPos.x+=10*u.velocity.x);var o=u.initialVel*Math.sin(u.angle);u.velocity.y=o-t.ENV.gravity*u.time,u.current3dPos.y=-u.initial3dPos.y+o*u.time-t.ENV.gravity*u.time*u.time*.5,u.current3dPos.y<u.bounceLevel&&(u.rebound=!0),u.time+=t.TIME}}),l(this,"drawShadow",function(i){var n=u.isBallInside()?t.BOARD_Y:0,o=new e.Position(u.current3dPos.x,n,u.current3dPos.z);o=e.projection.get2dProjection(o),i.beginPath(),i.ellipse(o.x,o.y,u.radius,.5*u.radius,0,0,360),i.fillStyle="rgba(0, 0, 0, 0.2)",i.fill(),i.closePath()}),l(this,"bounceBack",function(i,n){var s,a;u.angle=0,u.initialVel=t.BOUNCE_BACK_VELOCITY,n instanceof o.default?(s=i.z-t.NET_OFFSET,a=-u.initialVel):n instanceof r.default&&(s=i.z+t.NET_OFFSET,a=u.initialVel),u.initial3dPos=new e.Position(u.current3dPos.x,-u.current3dPos.y,s),u.current3dPos=new e.Position(u.current3dPos.x,-u.current3dPos.y,s),u.velocity.z=a*Math.cos(u.angle),u.time=0,u.bounceCount=0}),l(this,"hit",function(i,n,r,s){var a,c;u.angle=t.ENV.toRadian(s),u.initialVel=n,i instanceof o.default?(a=i.position.z+10,c=u.initialVel,u.velocity.x=r>0?Math.cos(r):-Math.cos(r)):(a=i.position.z-10,c=-u.initialVel,u.velocity.x=0),u.initial3dPos=new e.Position(u.current3dPos.x,-u.current3dPos.y,a),u.current3dPos=new e.Position(u.current3dPos.x,-u.current3dPos.y,a),u.velocity.z=c*Math.cos(u.angle),u.time=0,u.bounceCount=0}),l(this,"setPosition",function(t){u.initial3dPos=new e.Position(t.x,t.y,t.z),u.current3dPos=new e.Position(t.x,t.y,t.z),u.bounceCount=0,u.time=0}),l(this,"serve",function(e,i){u.initialVel=Math.abs(e),u.velocity.x=i?i>0?Math.cos(i):-Math.cos(i):0,u.angle=t.SERVE_ANGLE,u.velocity.z=e*Math.cos(u.angle)}),l(this,"checkCollision",function(e){var n=u.current3dPos,s=i.Game.state.inPlay?-n.y:n.y,a=e.surface3d;if(n.x>=a.topLeft.x&&s>=a.topLeft.y&&n.x<=a.topRight.x&&s>=a.topRight.y&&n.x<=a.bottomRight.x&&s<=a.bottomRight.y&&n.x>=a.bottomLeft.x&&s<=a.bottomLeft.y)if(e instanceof o.default){if(n.z<=e.position.z&&n.z>=e.position.z-t.BAT_THICKNESS)return i.Game.state.inPlay&&(n.z=e.position.z),!0}else if(e instanceof r.default&&n.z>=e.position.z&&n.z<=e.position.z+t.BAT_THICKNESS)return i.Game.state.inPlay&&(n.z=e.position.z),!0;return!1}),l(this,"isBallInside",function(){return u.current3dPos.x<=t.BOARD_RIGHT_X+t.BALL_MAX_RADIUS&&u.current3dPos.x>=t.BOARD_LEFT_X-t.BALL_MAX_RADIUS&&u.current3dPos.z<=t.BOARD_END+t.BALL_MAX_RADIUS&&u.current3dPos.z>=t.BOARD_Z-t.BALL_MAX_RADIUS?(u.bounceLevel=-t.BOARD_Y,!0):(u.bounceLevel=0,!1)}),l(this,"ballOut",function(){return u.current3dPos.x>=t.RIGHT_WALL||u.current3dPos.x<=t.LEFT_WALL||u.current3dPos.z<=0||u.current3dPos.z>=t.END_WALL?(i.Game.state.ballIn=!0,!0):(i.Game.state.ballIn=!1,!1)}),this.initial3dPos=new e.Position(a.x,a.y,a.z),this.current3dPos=new e.Position(a.x,a.y,a.z),this.radius=t.BALL_MAX_RADIUS,this.angle=t.BALL_ANGLE,this.initialVel=t.BALL_INITAL_VEL,this.velocity={z:this.initialVel*Math.cos(this.angle),y:0,x:0},this.time=0,this.rebound=!1,this.lastPosition=new e.Position(a.x,a.y,a.z),this.bounceCount=0,this.bounceLevel=-t.BOARD_Y},P=d;exports.default=P;
},{"../constants":"XGi3","../utils":"IOwx","../game/":"Xn8G","../assets":"dVs8","../players/user":"b8z5","../players/opponent":"BTgw"}],"FPLf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=p(require("../constants")),r=a(require("../players/user")),t=a(require("../players/opponent")),s=require("../assets"),n=require("../game");function a(e){return e&&e.__esModule?e:{default:e}}function o(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return o=function(){return e},e}function p(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o();if(r&&r.has(e))return r.get(e);var t={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var a=s?Object.getOwnPropertyDescriptor(e,n):null;a&&(a.get||a.set)?Object.defineProperty(t,n,a):t[n]=e[n]}return t.default=e,r&&r.set(e,t),t}function i(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function c(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var l=function a(o,p,l,u){var f=this,y=l.playerName,v=l.bestOfGames;i(this,a),c(this,"drawCard",function(e){f.state.server instanceof r.default?e.drawImage(s.sprite,a.sprite.player.sx,a.sprite.player.sy,a.sprite.player.sw,a.sprite.player.sh,f.position.x,f.position.y,a.sprite.player.sw,a.sprite.player.sh):f.state.server instanceof t.default&&e.drawImage(s.sprite,a.sprite.opponent.sx,a.sprite.opponent.sy,a.sprite.opponent.sw,a.sprite.opponent.sh,f.position.x,f.position.y,a.sprite.opponent.sw,a.sprite.opponent.sh)}),c(this,"drawScore",function(r){r.beginPath(),r.font="bold 20px Arial",r.fillStyle=e.WHITE,r.fillText(f.playerName,70,52),r.fillText("COMPUTER",54,104),r.fillText("COMPUTER",54,104),r.fillText(f.scores.games.player,304,52),r.fillText(f.scores.games.opponent,288,104),r.fillStyle=e.BLACK_A,r.fillText(f.scores.current.player,364,52),r.fillText(f.scores.current.opponent,348,104),r.closePath()}),c(this,"draw",function(e){f.drawCard(e),f.drawScore(e)}),c(this,"updateScore",function(e,r){var t="".concat(e.bounce).concat(r.bounce);n.Game.state.serveSuccess?f.state.driver===e?"01"===t?(f.scores.current.player++,s.clapHigh.play()):(f.scores.current.opponent++,s.clapLow.play()):f.state.driver===r&&("10"===t?(f.scores.current.opponent++,s.clapLow.play()):(f.scores.current.player++,s.clapHigh.play())):f.state.server===e?"11"===t?(f.scores.current.player++,s.clapHigh.play()):(f.scores.current.opponent++,s.clapLow.play()):f.state.server===r&&("11"===t?(f.scores.current.opponent++,s.clapLow.play()):(f.scores.current.player++,s.clapHigh.play())),10===f.scores.current.player&&10===f.scores.current.opponent&&(f.state.deuce=!0,f.state.serveChange=1)}),c(this,"checkWin",function(e){if(f.state.deuce){var r=f.scores.current.player-f.scores.current.opponent;if(2===Math.abs(r)){var t=r>0?"player":"opponent";f.scores.games[t]++,e()}}else{if(11===f.scores.current.player)return f.scores.games.player++,void e();if(11===f.scores.current.opponent)return f.scores.games.opponent++,void e()}}),c(this,"allOver",function(){var e=f.scores.games.player,r=f.scores.games.opponent,t=Math.ceil(f.bestOfGames/2);return e===t?(n.Game.state.isOver=!0,f.endFn(f.playerName),!0):r===t&&(n.Game.state.isOver=!0,f.endFn("COMPUTER"),!0)}),c(this,"server",function(e,r){if((f.scores.current.player+f.scores.current.opponent)%f.state.serveChange==0){var t=f.state.server===e?r:e;f.state.server=t,f.state.driver=t}}),c(this,"resetState",function(){f.state={serveChange:2,server:f.firstServer,driver:f.firstServer},f.scores.current.player=0,f.scores.current.opponent=0}),this.position=o,this.firstServer=p,this.state={serveChange:2,server:this.firstServer,driver:this.firstServer,deuce:!1},this.scores={current:{player:0,opponent:0},games:{player:0,opponent:0}},this.bestOfGames=v,this.playerName=y,this.endFn=u};l.sprite={player:{sx:0,sy:316,sw:390,sh:100},opponent:{sx:0,sy:417,sw:390,sh:100}};var u=l;exports.default=u;
},{"../constants":"XGi3","../players/user":"b8z5","../players/opponent":"BTgw","../assets":"dVs8","../game":"Xn8G"}],"g2Hq":[function(require,module,exports) {
"use strict";var e=y(require("./constants")),t=require("./utils"),n=require("./background"),r=p(require("./components/table")),o=p(require("./components/net")),a=p(require("./components/ball")),s=p(require("./components/scoreboard")),l=p(require("./players/opponent")),i=p(require("./players/user")),u=require("./assets"),c=require("./game");function p(e){return e&&e.__esModule?e:{default:e}}function d(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return d=function(){return e},e}function y(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=d();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=r?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}return n.default=e,t&&t.set(e,n),n}var A=document.getElementById("game");A.width=e.CANVAS_WIDTH,A.height=e.CANVAS_HEIGHT;var f,_,T,b,m,w,E,S,v=A.getContext("2d"),H=document.body.querySelector(".layout"),I=document.body.querySelector(".info"),O=document.body.querySelector(".intro"),C=O.querySelector("form"),L={state:e.STATE_INIT,assets:{total:7,loadCount:0}},N={floor:f,walls:_,table:T,net:b,ball:m,player:w,opponent:E,scoreboard:S};function q(){L.assets.loadCount++,L.assets.loadCount>=L.assets.total&&(L.state=e.STATE_LOADED,(0,u.removeAssetsEvent)(q),(0,c.initMouseEvent)(),h())}function D(){H.style.display="block",I.style.display="table",I.querySelector(".content").innerHTML="Press ESC to pause / resume"}function P(){H.style.display="none",I.style.display="none"}function g(e){e.preventDefault(),O.style.display="none",H.style.display="none",R({playerName:e.target.elements.player.value.toUpperCase(),bestOfGames:parseInt(e.target.elements.bestof.value)})}function M(){G(),I.style.display="none",O.style.display="table",C.removeEventListener("submit",g),C.addEventListener("submit",g)}function G(){v.clearRect(-500,-500,e.CANVAS_WIDTH+500,e.CANVAS_HEIGHT+500),t.projection.camera.position.x=e.HALF_CANVAS_WIDTH,t.projection.camera.position.y=e.CANVAS_HEIGHT<=-e.MAX_CAMERA_Y?-e.CANVAS_HEIGHT:e.MAX_CAMERA_Y,t.projection.viewplane.x=e.HALF_CANVAS_WIDTH;var s=new t.Position(e.HALF_CANVAS_WIDTH,e.BOARD_Y-e.BALL_START_HEIGHT,e.BOARD_Z),u=new t.Position(0,e.BOARD_Y-e.BALL_START_HEIGHT,e.PLAYER_Z_POSITION),c=new t.Position(1e3,e.BOARD_Y-e.BALL_START_HEIGHT,e.OPPONENT_Z_POSITION);N.floor=new n.Floor,N.walls=new n.Wall,N.table=new r.default,N.net=new o.default,N.ball=new a.default(s),N.player=new i.default(u),N.opponent=new l.default(c),N.floor.draw(v),N.walls.draw(v),N.table.draw(v),N.net.draw(v)}function R(e){var n=new t.Position(20,20);N.scoreboard=new s.default(n,N.player,e,W),u.referee.play(),(0,c.startGame)(v,N,D,P)}function W(e){u.referee.play();var t=document.createElement("button"),n='<div class="row"><h1>'+e+" WINS!</h1></div>",r=I.querySelector(".content");t.classList.add("btn"),t.innerText="NEW GAME",r.innerHTML=n,r.appendChild(t),H.style.display="block",I.style.display="table",t.addEventListener("click",function(){(0,c.resetGame)(),M()})}function h(){switch(L.state){case e.STATE_INIT:(0,u.initAssets)(q);break;case e.STATE_LOADED:M()}}h();
},{"./constants":"XGi3","./utils":"IOwx","./background":"Kgao","./components/table":"COnm","./components/net":"eYIz","./components/ball":"A97j","./components/scoreboard":"FPLf","./players/opponent":"BTgw","./players/user":"b8z5","./assets":"dVs8","./game":"Xn8G"}]},{},["g2Hq"], null)
//# sourceMappingURL=scripts.45927c18.js.map